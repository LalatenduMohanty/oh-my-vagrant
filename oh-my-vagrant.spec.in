%global project_version __VERSION__

Name:		oh-my-vagrant
Version:	__VERSION__
#Release:	__RELEASE__%{?dist}	# use this to make dist specific builds
Release:	__RELEASE__
Summary:	An easy to use dev environment for using vagrant with puppet, docker and more!
License:	AGPLv3+
URL:		https://github.com/purpleidea/oh-my-vagrant
Source0:	https://dl.fedoraproject.org/pub/alt/purpleidea/oh-my-vagrant/SOURCES/oh-my-vagrant-%{project_version}.tar.bz2
BuildArch:	noarch

Requires: vagrant >= 1.6.5
Requires: vagrant-libvirt >= 0.0.24

%description
An easy to use dev environment for using vagrant with puppet, docker and more!

%prep
%setup -c -q -T -D -a 0

find %{_builddir} -type f -name ".*" -exec rm {} +

%build

%install
rm -rf %{buildroot}
# _datadir is typically /usr/share/
install -d -m 0755 %{buildroot}/%{_datadir}/oh-my-vagrant/
cp -r oh-my-vagrant-%{project_version}/* %{buildroot}/%{_datadir}/oh-my-vagrant/

mkdir -p %{buildroot}/%{_bindir}
install -m 0755 oh-my-vagrant-%{project_version}/bin/omv.sh %{buildroot}/%{_bindir}/omv

mkdir -p %{buildroot}%{_sysconfdir}/profile.d
install oh-my-vagrant-%{project_version}/extras/vagrant.bashrc -m 0755 %{buildroot}%{_sysconfdir}/profile.d/oh-my-vagrant.sh

%files
%dir %{_sysconfdir}/profile.d
%attr(0755, root, root) %{_sysconfdir}/profile.d/oh-my-vagrant.sh
%{_datadir}/oh-my-vagrant/*
%{_bindir}/omv

# this changelog is auto-generated by git log
%changelog
